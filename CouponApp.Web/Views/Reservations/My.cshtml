@using CouponApp.Web.Models.Reservation

@model List<ReservationViewModel>

<h2>My Reservations</h2>

<table class="table">

    <tr>
        <th>Offer</th>
        <th>Price</th>
        <th>Expires</th>
        <th></th>
    </tr>

    @foreach (var r in Model)
    {
        <tr>

            <td>@r.OfferTitle</td>

            <td>@r.Price</td>

            <td>@r.ExpiresAt.ToLocalTime()</td>

            <td>

                <div class="d-flex gap-2">

                    <form asp-controller="Reservations"
                          asp-action="PurchaseFromReservation"
                          method="post">
                        <input type="hidden"
                               name="reservationId"
                               value="@r.Id" />

                        <button class="btn btn-success btn-sm">
                            Convert to Coupon
                        </button>

                    </form>

                    <form asp-action="Cancel" method="post">

                        <input type="hidden"
                               name="id"
                               value="@r.Id" />

                        <button class="btn btn-danger btn-sm">
                            Cancel
                        </button>

                    </form>

                </div>

            </td>

        </tr>
    }

</table>